<md-content class="md-padding" flex="100" ng-if="$ctrl.loading">
    <md-progress-linear md-mode="indeterminate"></md-progress-linear>
</md-content>

<md-content class="md-padding" flex="50" ng-if="!$ctrl.loading">
    <h2>
        <i class="fa" ng-class="{'fa-square-o': $ctrl.riddle.score < $ctrl.riddle.minScoreToSolve, 'fa-check-square-o': $ctrl.riddle.score >= $ctrl.riddle.minScoreToSolve}"></i>        &nbsp; {{$ctrl.riddle.title}} &nbsp;
        <i class="fa" ng-class="{'fa-star-o light': $ctrl.riddle.score <= 0, 'fa-star': $ctrl.riddle.score > 0}"></i>
        <i class="fa" ng-class="{'fa-star-o light': $ctrl.riddle.score <= 1, 'fa-star': $ctrl.riddle.score > 1}"></i>
        <i class="fa" ng-class="{'fa-star-o light': $ctrl.riddle.score <= 2, 'fa-star': $ctrl.riddle.score > 2}"></i>
    </h2>
    <md-divider></md-divider>

    <div btf-markdown="$ctrl.riddle.description"></div>
    <md-divider></md-divider>

    <h3>Goals</h3>

    <table>
        <tbody>
            <tr ng-repeat="goal in $ctrl.riddle.goals track by $index" ng-if="$index <= $ctrl.riddle.score">
                <td>
                    <i class="fa" ng-class="{'fa-square-o': $ctrl.riddle.score <= $index, 'fa-check-square-o': $ctrl.riddle.score > $index}"></i>
                </td>
                <td style="min-width: 5em; text-align: center;">
                    <i class="fa fa-star"></i>
                    <i class="fa" ng-class="{'fa-star-o light': $index <= 0, 'fa-star': $index > 0}"></i>
                    <i class="fa" ng-class="{'fa-star-o light': $index <= 1, 'fa-star': $index > 1}"></i>
                </td>
                <td>
                    <i ng-if="$index >= $ctrl.riddle.minScoreToSolve">Bonus Goal:</i> {{goal}}
                </td>
            </tr>
        </tbody>
    </table>

    <p ng-if="$ctrl.riddle.minScoreToSolve == 2">
        You need at least two stars (<i class="fa fa-star"></i>&nbsp;<i class="fa fa-star"></i>&nbsp;<i class="fa fa-star-o light"></i>)
        in order to solve the riddle.
    </p>

    <p ng-if="$ctrl.riddle.minScoreToSolve == 3">
        You need all three stars (<i class="fa fa-star">&nbsp;</i><i class="fa fa-star"></i>&nbsp;<i class="fa fa-star"></i>)
        in order to solve the riddle.
    </p>

    <md-divider></md-divider>

    <h3>Function description</h3>

    <div btf-markdown="$ctrl.riddle.functionDescription"></div>
    <attribute-info attributes="$ctrl.riddle.functionData.params"></attribute-info>
</md-content>

<md-content flex="50" layout="column" ng-if="!$ctrl.loading">
    <div flex="">
        <textarea ng-model="$ctrl.riddle.functionData.code" ui-codemirror="$ctrl.editorOptions"></textarea>
    </div>

    <div class="md-dialog-actions" layout="row" layout-align="end">
        <md-button class="md-raised" ng-click="$ctrl.trash()">Trash</md-button>
        <md-button class="md-raised" ng-click="$ctrl.save()">Save</md-button>
        <md-button class="md-primary md-raised" ng-click="$ctrl.solve($event)">Solve</md-button>
    </div>
</md-content>